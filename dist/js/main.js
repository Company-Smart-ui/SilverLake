"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var c=0,r=function(){};return{s:r,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}var body=document.querySelector("body"),html=document.querySelector("html"),header=document.querySelector(".header"),navBtn=document.querySelector(".close"),navBtnPopUp=document.querySelector(".close-pop-up"),popUp=document.querySelector(".wrap-pop-up");function closePopUp(){navBtnPopUp&&navBtnPopUp.addEventListener("click",(function(){popUp.classList.add("cancel")}))}window.onload=function(){pagescroll(),closePopUp(),openGuests(),countAdults(),countChild(),countInfants(),countPets(),window.innerWidth<=992&&openMobileSearch()};var btnGuests=document.querySelector(".btn-guests"),guests=document.querySelector(".guests"),closeGuests=document.querySelector(".close-guests"),adults=0,incrementAdults=document.querySelector("#increment-adults"),decrementAdults=document.querySelector("#decrement-adults"),child=0,incrementChild=document.querySelector("#increment-children"),decrementChild=document.querySelector("#decrement-children"),infants=0,incrementInfants=document.querySelector("#increment-infants"),decrementInfants=document.querySelector("#decrement-infants"),pets=0,incrementPets=document.querySelector("#increment-pets"),decrementPets=document.querySelector("#decrement-pets");function openGuests(){guests&&btnGuests&&(btnGuests.addEventListener("click",(function(){guests.classList.toggle("d-block")})),closeGuests.addEventListener("click",(function(){guests.classList.remove("d-block");var e="",t="",n="",c="";adults>0&&(e=adults+" Adult, ",adults>1&&(e=adults+" Adults, ")),child>0&&(t=child+" Child, ",child>1&&(t=child+" Children, ")),infants>0&&(n=infants+" Infant, ",infants>1&&(n=infants+" Infants, ")),pets>0&&(c=pets+" Pet",pets>1&&(c=pets+" Pets")),btnGuests.innerHTML=e+t+n+c})))}function countAdults(){incrementAdults&&decrementAdults&&(incrementAdults.addEventListener("click",(function(){adults<8&&(adults++,document.getElementById("adults-value").innerHTML=adults)})),decrementAdults.addEventListener("click",(function(){adults>0&&(adults--,document.getElementById("adults-value").innerHTML=adults)})))}function countChild(){incrementChild&&decrementChild&&(incrementChild.addEventListener("click",(function(){child<8&&(child++,document.getElementById("children-value").innerHTML=child)})),decrementChild.addEventListener("click",(function(){child>0&&(child--,document.getElementById("children-value").innerHTML=child)})))}function countInfants(){incrementInfants&&decrementInfants&&(incrementInfants.addEventListener("click",(function(){infants<8&&(infants++,document.getElementById("infants-value").innerHTML=infants)})),decrementInfants.addEventListener("click",(function(){infants>0&&(infants--,document.getElementById("infants-value").innerHTML=infants)})))}function countPets(){incrementPets&&decrementPets&&(incrementPets.addEventListener("click",(function(){pets<8&&(pets++,document.getElementById("pets-value").innerHTML=pets)})),decrementPets.addEventListener("click",(function(){pets>0&&(pets--,document.getElementById("pets-value").innerHTML=pets)})))}function openMobileSearch(){var e=document.querySelector(".btn-search"),t=document.querySelector(".search"),n=document.querySelector(".btn-close");e&&(e.addEventListener("click",(function(){t.classList.add("active")})),n.addEventListener("click",(function(){t.classList.remove("active")})))}var forms=document.getElementsByClassName("needs-validation");forms&&window.addEventListener("load",(function(){Array.prototype.filter.call(forms,(function(e){e.addEventListener("submit",(function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))}),!1),function(){var e=document.querySelector(".btn-sale"),t=document.querySelector(".btn-sold"),n=document.querySelector(".block-sale"),c=document.querySelector(".block-sold");e&&t&&(e.addEventListener("click",(function(){n.style.order="-1",c.style.order="0"})),t.addEventListener("click",(function(){c.style.order="-1",n.style.order="0"})))}();var elementsAnimate=document.querySelectorAll(".element-animation");function firterStories(){var e=Array.from(document.querySelectorAll("[data-story]")),t=Array.from(document.querySelectorAll("[data-btn]"));e&&t&&t.forEach((function(n){n.addEventListener("click",(function(){"all"===n.dataset.btn?(e.forEach((function(e){e.classList.remove("d-none","opacity-0","active")})),t.forEach((function(e){e.classList.remove("bg-accent","color-white")}))):n.classList.contains("bg-accent")?(n.classList.remove("bg-accent","color-white"),e.filter((function(e){n.dataset.btn===e.dataset.story&&(e.classList.add("d-none","opacity-0"),e.classList.remove("active"))}))):(n.classList.add("bg-accent","color-white"),e.filter((function(e){e.classList.contains("active")||e.classList.add("d-none","opacity-0"),n.dataset.btn===e.dataset.story&&(e.classList.remove("d-none","opacity-0"),e.classList.add("active"))})))}))}))}function firterTreatments(){var e=Array.from(document.querySelectorAll("[data-block]")),t=Array.from(document.querySelectorAll("[data-button]"));e&&t&&t.forEach((function(n){n.addEventListener("click",(function(){t.filter((function(e){return e!==n})).forEach((function(e){e.classList.remove("bg-accent","color-white")})),n.classList.contains("bg-accent")?n.classList.remove("bg-accent","color-white"):n.classList.add("bg-accent","color-white"),e.filter((function(t){t.dataset.block===n.dataset.button&&(t.classList.contains("active")?(e.forEach((function(e){return e.classList.remove("d-none")})),t.classList.remove("active")):(e.forEach((function(e){e.classList.add("d-none"),e.classList.remove("active")})),t.classList.remove("d-none"),t.classList.add("active")))}))}))}))}function spaTreatments(){document.querySelectorAll(".btn-close-circle").forEach((function(e){return e.addEventListener("click",(function(){e.classList.toggle("active"),e.closest(".treatment").querySelector(".wrap-treatments").classList.toggle("h-auto")}))}))}function closenav(){header.classList.remove("nav-open"),navBtn.style.marginRight="0",body.classList.remove("scroll-hidden")}function togglenav(){header.classList.toggle("nav-open"),header.classList.contains("nav-open")?(navBtn.style.marginRight=window.innerWidth-html.offsetWidth+"px",body.classList.add("scroll-hidden")):(body.classList.remove("scroll-hidden"),navBtn.style.marginRight="0")}!function(){if(elementsAnimate){var e,t=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&e.target.classList.add("element-show")}))}),{threshold:[.5]}),n=_createForOfIteratorHelper(elementsAnimate);try{for(n.s();!(e=n.n()).done;){var c=e.value;t.observe(c)}}catch(e){n.e(e)}finally{n.f()}}}(),function(){var e=document.querySelector(".search"),t=document.querySelector(".search-bottom"),n=document.querySelector(".footer");e&&!t&&n.classList.add("mb-5r","mb-lg-0")}(),firterStories(),firterTreatments(),spaTreatments(),navBtn.addEventListener("click",togglenav);var links=header.querySelectorAll("a");function pagescroll(){var e=0;document.querySelector(".fixed")||window.addEventListener("scroll",(function(){e>40&&header.classList.add("scroll"),(e=pageYOffset)<40&&header.classList.remove("scroll")}))}function addScript(e,t){localStorage.getItem(e)&&(t=1);var n=document.createElement("script");return n.async=!0,n.src=e,setTimeout((function(){body.appendChild(n),localStorage.setItem(e,!0)}),t),n}function accordionInit(e){window.addEventListener("load",(function(){var t=e.querySelectorAll(".accordion__item"),n=function(t){var n=e.querySelector(".is-open");c(t),n&&n!==t&&c(n)};t.forEach((function(e){var t=e.querySelector(".accordion__title-text");t.addEventListener("click",(function(){n(e)})),t.addEventListener("keydown",(function(t){"Enter"!==t.code&&"Space"!==t.code||(t.preventDefault(),n(e))}))}));var c=function(e){var t=e.querySelector(".accordion__body");e.classList.contains("is-open")?(t.removeAttribute("style"),e.classList.remove("is-open")):(t.style.overflow="hidden",t.style.transition="max-height 10s cubic-bezier(0.22, 0.61, 0.36, 1)",t.style.maxHeight="2000px",e.classList.add("is-open"))}}))}if(links.forEach((function(e){e.addEventListener("click",closenav)})),window.addEventListener("load",(function(){var e=window.matchMedia("(max-width: 480px)").matches,t=1,n=document.querySelector(".swiper-delay_js");if(n){var c=parseInt(n.dataset.time);c>0&&(t=1+c/5,e&&(t=c),addScript("js/swiper-min.js",t).addEventListener("load",(function(){addScript("js/slider-init.js",0)})))}})),document.querySelector(".accordion")){var accordions=document.querySelectorAll(".accordion");accordions.forEach((function(e){accordionInit(e)}))}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibGVuZ3RoIiwiaSIsIkYiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsImUiLCJfZSIsImYiLCJUeXBlRXJyb3IiLCJlcnIiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwiY2FsbCIsInN0ZXAiLCJuZXh0IiwiX2UyIiwibWluTGVuIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZnJvbSIsInRlc3QiLCJhcnIiLCJsZW4iLCJhcnIyIiwiYm9keSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImh0bWwiLCJoZWFkZXIiLCJuYXZCdG4iLCJuYXZCdG5Qb3BVcCIsInBvcFVwIiwiY2xvc2VQb3BVcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJ3aW5kb3ciLCJvbmxvYWQiLCJwYWdlc2Nyb2xsIiwib3Blbkd1ZXN0cyIsImNvdW50QWR1bHRzIiwiY291bnRDaGlsZCIsImNvdW50SW5mYW50cyIsImNvdW50UGV0cyIsImlubmVyV2lkdGgiLCJvcGVuTW9iaWxlU2VhcmNoIiwiYnRuR3Vlc3RzIiwiZ3Vlc3RzIiwiY2xvc2VHdWVzdHMiLCJhZHVsdHMiLCJpbmNyZW1lbnRBZHVsdHMiLCJkZWNyZW1lbnRBZHVsdHMiLCJjaGlsZCIsImluY3JlbWVudENoaWxkIiwiZGVjcmVtZW50Q2hpbGQiLCJpbmZhbnRzIiwiaW5jcmVtZW50SW5mYW50cyIsImRlY3JlbWVudEluZmFudHMiLCJwZXRzIiwiaW5jcmVtZW50UGV0cyIsImRlY3JlbWVudFBldHMiLCJ0b2dnbGUiLCJyZW1vdmUiLCJpbnB1dEFkdWx0cyIsImlucHV0Q2hpbGQiLCJpbnB1dEluZmFudHMiLCJpbnB1dFBldHMiLCJpbm5lckhUTUwiLCJnZXRFbGVtZW50QnlJZCIsImJ0blNlYXJjaCIsInNlYXJjaCIsImJ0bkNsb3NlU2VhcmNoIiwiZm9ybXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZmlsdGVyIiwiZm9ybSIsImV2ZW50IiwiY2hlY2tWYWxpZGl0eSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiYnRuU2FsZSIsImJ0blNvbGQiLCJibG9ja1NhbGUiLCJibG9ja1NvbGQiLCJzdHlsZSIsIm9yZGVyIiwiZWxlbWVudHNBbmltYXRlIiwicXVlcnlTZWxlY3RvckFsbCIsImZpcnRlclN0b3JpZXMiLCJhcnJTdG9yaWVzIiwiYXJyQnRuIiwiZm9yRWFjaCIsIml0ZW0iLCJkYXRhc2V0IiwiYnRuIiwicSIsImNvbnRhaW5zIiwiZWxlbSIsInN0b3J5IiwiZmlydGVyVHJlYXRtZW50cyIsImFyclRyZWF0bWVudHMiLCJhIiwiaUJ0biIsImJsb2NrIiwiYnV0dG9uIiwic3BhVHJlYXRtZW50cyIsImNsb3Nlc3QiLCJjbG9zZW5hdiIsIm1hcmdpblJpZ2h0IiwidG9nZ2xlbmF2Iiwib2Zmc2V0V2lkdGgiLCJfc3RlcCIsIm9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyeSIsImNoYW5nZSIsImlzSW50ZXJzZWN0aW5nIiwidGFyZ2V0IiwidGhyZXNob2xkIiwiX2l0ZXJhdG9yIiwiZWxtIiwib2JzZXJ2ZSIsInNlYXJjaEJvdHRvbSIsImZvb3RlciIsImxpbmtzIiwicHNjcm9sbCIsInBhZ2VZT2Zmc2V0IiwiYWRkU2NyaXB0IiwicGF0aCIsInN0aW1lb3V0IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNvbWVKcyIsImNyZWF0ZUVsZW1lbnQiLCJhc3luYyIsInNyYyIsInNldFRpbWVvdXQiLCJhcHBlbmRDaGlsZCIsInNldEl0ZW0iLCJhY2NvcmRpb25Jbml0IiwiYWNjb3JkaW9uIiwiaXRlbXMiLCJvcGVuZWRJdGVtIiwib3BlbmVkX2l0ZW0iLCJ0b2dnbGVfaXRlbSIsInRpdGxlIiwiY29kZSIsInJlbW92ZUF0dHJpYnV0ZSIsIm92ZXJmbG93IiwidHJhbnNpdGlvbiIsIm1heEhlaWdodCIsImxpbmsiLCJtZWRpYVF1ZXJ5MiIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwic3dpcGVyTG9hZGluZ0RlbGF5Iiwic3dpcERlbGF5IiwiYWRkdGltZSIsInBhcnNlSW50IiwidGltZSIsImFjY29yZGlvbnMiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsU0FBU0EsMkJBQTJCQyxFQUFHQyxHQUFrQixJQUFJQyxFQUF1QixvQkFBWEMsUUFBMEJILEVBQUVHLE9BQU9DLFdBQWFKLEVBQUUsY0FBZSxJQUFLRSxFQUFJLENBQUUsR0FBSUcsTUFBTUMsUUFBUU4sS0FBT0UsRUFBS0ssNEJBQTRCUCxLQUFPQyxHQUFrQkQsR0FBeUIsaUJBQWJBLEVBQUVRLE9BQXFCLENBQU1OLElBQUlGLEVBQUlFLEdBQUksSUFBSU8sRUFBSSxFQUFPQyxFQUFJLFdBQWMsRUFBRyxNQUFPLENBQUVDLEVBQUdELEVBQUdFLEVBQUcsV0FBZSxPQUFJSCxHQUFLVCxFQUFFUSxPQUFlLENBQUVLLE1BQU0sR0FBZSxDQUFFQSxNQUFNLEVBQU9DLE1BQU9kLEVBQUVTLEtBQVEsRUFBR00sRUFBRyxTQUFXQyxHQUFNLE1BQU1BLENBQUksRUFBR0MsRUFBR1AsRUFBSyxDQUFFLE1BQU0sSUFBSVEsVUFBVSx3SUFBMEksQ0FBRSxJQUE2Q0MsRUFBekNDLEdBQW1CLEVBQU1DLEdBQVMsRUFBWSxNQUFPLENBQUVWLEVBQUcsV0FBZVQsRUFBS0EsRUFBR29CLEtBQUt0QixFQUFJLEVBQUdZLEVBQUcsV0FBZSxJQUFJVyxFQUFPckIsRUFBR3NCLE9BQXNDLE9BQTlCSixFQUFtQkcsRUFBS1YsS0FBYVUsQ0FBTSxFQUFHUixFQUFHLFNBQVdVLEdBQU9KLEdBQVMsRUFBTUYsRUFBTU0sQ0FBSyxFQUFHUixFQUFHLFdB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QUFzQixFQUNqQyxJQUdOLENBQ0EsSUE0Q0t0RyxTQUFTQyxjQUFjLGNBQWUsQ0FDeEMsSUFBTXNJLFdBQWF2SSxTQUFTOEQsaUJBQWlCLGNBQzdDeUUsV0FBV3JFLFNBQVEsU0FBQWlELEdBQ2pCRCxjQUFjQyxFQUNmLEdBQ0YiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXG5jb25zdCBib2R5ID1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcbmNvbnN0IGh0bWw9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImh0bWxcIik7XG5jb25zdCBoZWFkZXI9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJcIik7XG5jb25zdCBuYXZCdG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKTtcbmNvbnN0IG5hdkJ0blBvcFVwPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2UtcG9wLXVwXCIpO1xuY29uc3QgcG9wVXA9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53cmFwLXBvcC11cFwiKTtcblxud2luZG93Lm9ubG9hZD0gZnVuY3Rpb24oKXtcbiAgcGFnZXNjcm9sbCgpO1xuICBjbG9zZVBvcFVwKCk7XG4gIG9wZW5HdWVzdHMoKTtcblxuICBjb3VudEFkdWx0cygpO1xuICBjb3VudENoaWxkKCk7XG4gIGNvdW50SW5mYW50cygpO1xuICBjb3VudFBldHMoKTtcbiAgaWYoIHdpbmRvdy5pbm5lcldpZHRoIDw9IDk5MiApe1xuICAgICAgb3Blbk1vYmlsZVNlYXJjaCgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBjbG9zZVBvcFVwKCl7XG4gICAgaWYobmF2QnRuUG9wVXApIHtcbiAgICAgICAgbmF2QnRuUG9wVXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcG9wVXAuY2xhc3NMaXN0LmFkZCgnY2FuY2VsJyk7XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5jb25zdCBidG5HdWVzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bi1ndWVzdHNcIik7XG5jb25zdCBndWVzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmd1ZXN0c1wiKTtcbmNvbnN0IGNsb3NlR3Vlc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1ndWVzdHNcIik7XG52YXIgYWR1bHRzID0gMDtcbmNvbnN0IGluY3JlbWVudEFkdWx0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5jcmVtZW50LWFkdWx0c1wiKTtcbmNvbnN0IGRlY3JlbWVudEFkdWx0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVjcmVtZW50LWFkdWx0c1wiKTtcbnZhciBjaGlsZCA9IDA7XG5jb25zdCBpbmNyZW1lbnRDaGlsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5jcmVtZW50LWNoaWxkcmVuXCIpO1xuY29uc3QgZGVjcmVtZW50Q2hpbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlY3JlbWVudC1jaGlsZHJlblwiKTtcbnZhciBpbmZhbnRzID0gMDtcbmNvbnN0IGluY3JlbWVudEluZmFudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luY3JlbWVudC1pbmZhbnRzXCIpO1xuY29uc3QgZGVjcmVtZW50SW5mYW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVjcmVtZW50LWluZmFudHNcIik7XG52YXIgcGV0cyA9IDA7XG5jb25zdCBpbmNyZW1lbnRQZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmNyZW1lbnQtcGV0c1wiKTtcbmNvbnN0IGRlY3JlbWVudFBldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlY3JlbWVudC1wZXRzXCIpO1xuXG5mdW5jdGlvbiBvcGVuR3Vlc3RzKCl7XG4gICAgaWYoZ3Vlc3RzICYmIGJ0bkd1ZXN0cykge1xuICAgICAgICBidG5HdWVzdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZ3Vlc3RzLmNsYXNzTGlzdC50b2dnbGUoJ2QtYmxvY2snKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNsb3NlR3Vlc3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGd1ZXN0cy5jbGFzc0xpc3QucmVtb3ZlKCdkLWJsb2NrJyk7XG4gICAgICAgICAgICB2YXIgaW5wdXRBZHVsdHMgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGlucHV0Q2hpbGQgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGlucHV0SW5mYW50cyA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgaW5wdXRQZXRzID0gXCJcIjtcbiAgICAgICAgICAgIGlmKGFkdWx0cyA+IDApIHtcbiAgICAgICAgICAgICAgICBpbnB1dEFkdWx0cyA9IGFkdWx0cyArIFwiIEFkdWx0LCBcIjtcbiAgICAgICAgICAgICAgICBpZihhZHVsdHMgPiAxKXtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRBZHVsdHMgPSBhZHVsdHMgKyBcIiBBZHVsdHMsIFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGNoaWxkID4gMCkge1xuICAgICAgICAgICAgICAgIGlucHV0Q2hpbGQgPSBjaGlsZCArIFwiIENoaWxkLCBcIjtcbiAgICAgICAgICAgICAgICBpZihjaGlsZCA+IDEpe1xuICAgICAgICAgICAgICAgICAgICBpbnB1dENoaWxkID0gY2hpbGQgKyBcIiBDaGlsZHJlbiwgXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaW5mYW50cyA+IDApIHtcbiAgICAgICAgICAgICAgICBpbnB1dEluZmFudHMgPSBpbmZhbnRzICsgXCIgSW5mYW50LCBcIjtcbiAgICAgICAgICAgICAgICBpZihpbmZhbnRzID4gMSl7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0SW5mYW50cyA9IGluZmFudHMgKyBcIiBJbmZhbnRzLCBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihwZXRzID4gMCkge1xuICAgICAgICAgICAgICAgIGlucHV0UGV0cyA9IHBldHMgKyBcIiBQZXRcIjtcbiAgICAgICAgICAgICAgICBpZihwZXRzID4gMSl7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0UGV0cyA9IHBldHMgKyBcIiBQZXRzXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnRuR3Vlc3RzLmlubmVySFRNTCA9IGlucHV0QWR1bHRzICsgaW5wdXRDaGlsZCArIGlucHV0SW5mYW50cyArIGlucHV0UGV0cztcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb3VudEFkdWx0cygpIHtcbiAgICBpZihpbmNyZW1lbnRBZHVsdHMgJiYgZGVjcmVtZW50QWR1bHRzKXtcbiAgICAgICAgaW5jcmVtZW50QWR1bHRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKGFkdWx0cyA8IDgpIHtcbiAgICAgICAgICAgICAgICBhZHVsdHMrKztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkdWx0cy12YWx1ZVwiKS5pbm5lckhUTUwgPSBhZHVsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkZWNyZW1lbnRBZHVsdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYoYWR1bHRzID4gMCl7XG4gICAgICAgICAgICAgICAgYWR1bHRzLS07XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZHVsdHMtdmFsdWVcIikuaW5uZXJIVE1MID0gYWR1bHRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb3VudENoaWxkKCkge1xuICAgIGlmKGluY3JlbWVudENoaWxkICYmIGRlY3JlbWVudENoaWxkKXtcbiAgICAgICAgaW5jcmVtZW50Q2hpbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYoY2hpbGQgPCA4KSB7XG4gICAgICAgICAgICAgICAgY2hpbGQrKztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoaWxkcmVuLXZhbHVlXCIpLmlubmVySFRNTCA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGVjcmVtZW50Q2hpbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYoY2hpbGQgPiAwKXtcbiAgICAgICAgICAgICAgICBjaGlsZC0tO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hpbGRyZW4tdmFsdWVcIikuaW5uZXJIVE1MID0gY2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvdW50SW5mYW50cygpIHtcbiAgICBpZihpbmNyZW1lbnRJbmZhbnRzICYmIGRlY3JlbWVudEluZmFudHMpe1xuICAgICAgICBpbmNyZW1lbnRJbmZhbnRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKGluZmFudHMgPCA4KSB7XG4gICAgICAgICAgICAgICAgaW5mYW50cysrO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5mYW50cy12YWx1ZVwiKS5pbm5lckhUTUwgPSBpbmZhbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGVjcmVtZW50SW5mYW50cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZihpbmZhbnRzID4gMCl7XG4gICAgICAgICAgICAgICAgaW5mYW50cy0tO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5mYW50cy12YWx1ZVwiKS5pbm5lckhUTUwgPSBpbmZhbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb3VudFBldHMoKSB7XG4gICAgaWYoaW5jcmVtZW50UGV0cyAmJiBkZWNyZW1lbnRQZXRzKXtcbiAgICAgICAgaW5jcmVtZW50UGV0cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZihwZXRzIDwgOCkge1xuICAgICAgICAgICAgICAgIHBldHMrKztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBldHMtdmFsdWVcIikuaW5uZXJIVE1MID0gcGV0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRlY3JlbWVudFBldHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYocGV0cyA+IDApe1xuICAgICAgICAgICAgICAgIHBldHMtLTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBldHMtdmFsdWVcIikuaW5uZXJIVE1MID0gcGV0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8gTW9iaWxlIFNlYXJjaFxuZnVuY3Rpb24gb3Blbk1vYmlsZVNlYXJjaCgpe1xuICAgIGNvbnN0IGJ0blNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXNlYXJjaFwiKTtcbiAgICBjb25zdCBzZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaFwiKTtcbiAgICBjb25zdCBidG5DbG9zZVNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLWNsb3NlXCIpO1xuICAgIGlmKGJ0blNlYXJjaCl7XG4gICAgICAgIGJ0blNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNlYXJjaC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgfSlcbiAgICAgICAgYnRuQ2xvc2VTZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWFyY2guY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG52YXIgZm9ybXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduZWVkcy12YWxpZGF0aW9uJyk7XG4oZnVuY3Rpb24oKSB7XG4gICAgaWYoZm9ybXMpe1xuICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGZvcm1zLCBmdW5jdGlvbihmb3JtKSB7XG4gICAgICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybS5jaGVja1ZhbGlkaXR5KCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCd3YXMtdmFsaWRhdGVkJyk7XG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG59KSgpO1xuXG4vLyBibG9ja3MgU2FsZSAmJiBTb2xkXG4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJ0blNhbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLXNhbGUnKTtcbiAgICB2YXIgYnRuU29sZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tc29sZCcpO1xuICAgIHZhciBibG9ja1NhbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmxvY2stc2FsZScpO1xuICAgIHZhciBibG9ja1NvbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmxvY2stc29sZCcpO1xuICAgIGlmKGJ0blNhbGUgJiYgYnRuU29sZCl7XG4gICAgICAgIGJ0blNhbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgYmxvY2tTYWxlLnN0eWxlLm9yZGVyID0gXCItMVwiO1xuICAgICAgICAgICAgYmxvY2tTb2xkLnN0eWxlLm9yZGVyID0gXCIwXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBidG5Tb2xkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGJsb2NrU29sZC5zdHlsZS5vcmRlciA9IFwiLTFcIjtcbiAgICAgICAgICAgIGJsb2NrU2FsZS5zdHlsZS5vcmRlciA9IFwiMFwiO1xuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuXG4vLyBmb3IgZWxlbWVudC1hbmltYXRpb25cbmxldCBlbGVtZW50c0FuaW1hdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWxlbWVudC1hbmltYXRpb24nKTtcbihmdW5jdGlvbigpe1xuICAgIGlmKGVsZW1lbnRzQW5pbWF0ZSl7XG4gICAgICAgIGZ1bmN0aW9uIG9uRW50cnkoZW50cnkpIHtcbiAgICAgICAgICAgIGVudHJ5LmZvckVhY2goY2hhbmdlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnZWxlbWVudC1zaG93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0aHJlc2hvbGQ6IFswLjVdIH07XG4gICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihvbkVudHJ5LCBvcHRpb25zKTtcblxuICAgICAgICBmb3IgKGxldCBlbG0gb2YgZWxlbWVudHNBbmltYXRlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsbSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG4vLyBpZiBzZWFyY2ggZG93blxuKGZ1bmN0aW9uKCl7XG4gICAgY29uc3Qgc2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaCcpO1xuICAgIGNvbnN0IHNlYXJjaEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYm90dG9tJyk7XG4gICAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3RlcicpO1xuICAgIGlmKHNlYXJjaCAmJiAhc2VhcmNoQm90dG9tKXtcbiAgICAgICAgZm9vdGVyLmNsYXNzTGlzdC5hZGQoJ21iLTVyJywgJ21iLWxnLTAnICk7XG4gICAgfVxufSkoKTtcblxuLy8gZmlydGVyIFN0b3JpZXNcbmZ1bmN0aW9uIGZpcnRlclN0b3JpZXMoKXtcbiAgICBjb25zdCBhcnJTdG9yaWVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zdG9yeV0nKSk7XG4gICAgY29uc3QgYXJyQnRuID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1idG5dJykpO1xuICAgIGlmKGFyclN0b3JpZXMgJiYgYXJyQnRuKXtcbiAgICAgICAgYXJyQnRuLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZihpdGVtLmRhdGFzZXQuYnRuID09PSBcImFsbFwiKXtcbiAgICAgICAgICAgICAgICAgICAgYXJyU3Rvcmllcy5mb3JFYWNoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnLCAnb3BhY2l0eS0wJywgJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBhcnJCdG4uZm9yRWFjaChxID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgcS5jbGFzc0xpc3QucmVtb3ZlKCdiZy1hY2NlbnQnLCAnY29sb3Itd2hpdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9ZWxzZVxuICAgICAgICAgICAgICAgIGlmKCFpdGVtLmNsYXNzTGlzdC5jb250YWlucygnYmctYWNjZW50Jykpe1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2JnLWFjY2VudCcsICdjb2xvci13aGl0ZScpO1xuICAgICAgICAgICAgICAgICAgICBhcnJTdG9yaWVzLmZpbHRlcihlbGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFlbGVtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnZC1ub25lJywgJ29wYWNpdHktMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5kYXRhc2V0LmJ0biA9PT0gZWxlbS5kYXRhc2V0LnN0b3J5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdvcGFjaXR5LTAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWFjY2VudCcsICdjb2xvci13aGl0ZScpO1xuICAgICAgICAgICAgICAgICAgICBhcnJTdG9yaWVzLmZpbHRlcihlbGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGF0YXNldC5idG4gPT09IGVsZW0uZGF0YXNldC5zdG9yeSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnLCAnb3BhY2l0eS0wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cbn1cbmZpcnRlclN0b3JpZXMoKTtcblxuLy8gZmlydGVyIFRyZWF0bWVudHNcbmZ1bmN0aW9uIGZpcnRlclRyZWF0bWVudHMoKXtcbiAgICBjb25zdCBhcnJUcmVhdG1lbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ibG9ja10nKSk7XG4gICAgY29uc3QgYXJyQnRuID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1idXR0b25dJykpO1xuICAgIGlmKGFyclRyZWF0bWVudHMgJiYgYXJyQnRuKXtcbiAgICAgICAgYXJyQnRuLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBsZXQgb3RoZXJCdG4gPSBhcnJCdG4uZmlsdGVyKGEgPT4gYSAhPT0gaXRlbSk7XG4gICAgICAgICAgICAgICAgb3RoZXJCdG4uZm9yRWFjaChpQnRuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1hY2NlbnQnLCAnY29sb3Itd2hpdGUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdiZy1hY2NlbnQnKSl7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYmctYWNjZW50JywgJ2NvbG9yLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnYmctYWNjZW50JywgJ2NvbG9yLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFyclRyZWF0bWVudHMuZmlsdGVyKGVsZW0gPT4geyBpZihlbGVtLmRhdGFzZXQuYmxvY2sgPT09IGl0ZW0uZGF0YXNldC5idXR0b24pe1xuICAgICAgICAgICAgICAgICAgICBpZihlbGVtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyVHJlYXRtZW50cy5mb3JFYWNoKGUgPT4gZS5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJUcmVhdG1lbnRzLmZvckVhY2goZSA9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cbn1cbmZpcnRlclRyZWF0bWVudHMoKTtcblxuLy8gb3Blbi9jbG9zZSBibG9jayBzcGEgdHJlYXRtZW50c1xuZnVuY3Rpb24gc3BhVHJlYXRtZW50cygpe1xuICAgIGNvbnN0IGJ0bkNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi1jbG9zZS1jaXJjbGUnKTtcbiAgICBidG5DbG9zZS5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIGNvbnN0IHBhcmVuID0gaXRlbS5jbG9zZXN0KCcudHJlYXRtZW50Jyk7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gcGFyZW4ucXVlcnlTZWxlY3RvcignLndyYXAtdHJlYXRtZW50cycpO1xuICAgICAgICBjaGlsZC5jbGFzc0xpc3QudG9nZ2xlKCdoLWF1dG8nKTtcbiAgICB9KSlcbn1cbnNwYVRyZWF0bWVudHMoKTtcblxuXG5cblxuXG5cblxuIFxuICAgICAgZnVuY3Rpb24gY2xvc2VuYXYoKSB7XG4gIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwibmF2LW9wZW5cIik7XG4gIG5hdkJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMFwiO1xuICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3Njcm9sbC1oaWRkZW4nKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlbmF2KCkge1xuICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZShcIm5hdi1vcGVuXCIpO1xuICBpZiAoaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucyhcIm5hdi1vcGVuXCIpKSB7XG4gICAgbmF2QnRuLnN0eWxlLm1hcmdpblJpZ2h0ID0gd2luZG93LmlubmVyV2lkdGggLSBodG1sLm9mZnNldFdpZHRoICsgXCJweFwiO1xuICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgnc2Nyb2xsLWhpZGRlbicpO1xuICB9IGVsc2Uge1xuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnc2Nyb2xsLWhpZGRlbicpO1xuICAgIG5hdkJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMFwiO1xuICB9XG59XG5uYXZCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZW5hdik7XG5jb25zdCBsaW5rcyA9IGhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7XG5saW5rcy5mb3JFYWNoKGxpbmsgPT4ge1xuICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VuYXYpO1xufSk7IFxuICAgICAgIGZ1bmN0aW9uIHBhZ2VzY3JvbGwoKXtcbiAgICBsZXQgcHNjcm9sbCA9IDA7XG4gICAgY29uc3QgZml4ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZpeGVkXCIpO1xuICAgIGlmKCFmaXhlZCl7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChwc2Nyb2xsID4gNDApe1xuICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdzY3JvbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBzY3JvbGw9cGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICBpZihwc2Nyb2xsIDwgNDApIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2Nyb2xsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiAgXG4gICAgICBmdW5jdGlvbiBhZGRTY3JpcHQocGF0aCAsc3RpbWVvdXQpeyAgXG4gICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0ocGF0aCkpIHtcbiAgICAgIHN0aW1lb3V0PTE7IFxuICAgIH0gIFxuICAgIGNvbnN0IHNvbWVKcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBcbiAgICBzb21lSnMuYXN5bmM9dHJ1ZTtcbiAgICBzb21lSnMuc3JjPXBhdGg7ICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGJvZHkuYXBwZW5kQ2hpbGQoc29tZUpzKTsgICBcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXRoICwgdHJ1ZSk7XG4gIH0sIHN0aW1lb3V0KTsgICAgIFxuICAgICAgcmV0dXJuICggXG4gICAgICAgICAgc29tZUpzIFxuICAgICAgKSBcbn0gICBcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpeyAgIFxuY29uc3QgbWVkaWFRdWVyeTIgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNDgwcHgpJykubWF0Y2hlczsgIFxubGV0IHN3aXBlckxvYWRpbmdEZWxheT0xOyBcbmNvbnN0IHN3aXBEZWxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItZGVsYXlfanMnKTsgXG5pZihzd2lwRGVsYXkpeyBcbiAgY29uc3QgYWRkdGltZT0gcGFyc2VJbnQoc3dpcERlbGF5LmRhdGFzZXQudGltZSk7XG4gIGlmKGFkZHRpbWU+MCl7XG4gICAgc3dpcGVyTG9hZGluZ0RlbGF5PTErIGFkZHRpbWUvNTtcbiAgICBpZiAobWVkaWFRdWVyeTIpIHtcbiAgICAgIHN3aXBlckxvYWRpbmdEZWxheSA9YWRkdGltZTtcbiAgICB9IFxuICAgICAgYWRkU2NyaXB0KCdqcy9zd2lwZXItbWluLmpzJyAsIHN3aXBlckxvYWRpbmdEZWxheSkuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsKCk9PntcbiAgICAgICAgYWRkU2NyaXB0KCdqcy9zbGlkZXItaW5pdC5qcycgLCAwKTtcbiAgICAgIH0pIFxuICAgICAgLy9zd2lwZXIgbG9hZGluZyBvbmx5IGlmIHN3aXBlciBkZWxheSBkYXRhdGltZSA+IDBcbiAgfSAgXG59ICAgXG59KVxuICAgICAgXG5mdW5jdGlvbiBhY2NvcmRpb25Jbml0KGFjY29yZGlvbikge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBcbiAgICAgIGNvbnN0IGl0ZW1zID0gYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWNjb3JkaW9uX19pdGVtXCIpOyBcbiAgICAgIGNvbnN0IG9wZW5lZEl0ZW0gPSAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBvcGVuZWRfaXRlbSA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKFwiLmlzLW9wZW5cIik7IFxuICAgICAgICB0b2dnbGVfaXRlbShpdGVtKTsgXG4gICAgICAgIGlmIChvcGVuZWRfaXRlbSAmJiBvcGVuZWRfaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICAgIHRvZ2dsZV9pdGVtKG9wZW5lZF9pdGVtKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgXG4gICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gaXRlbS5xdWVyeVNlbGVjdG9yKFwiLmFjY29yZGlvbl9fdGl0bGUtdGV4dFwiKTsgXG4gICAgICAgIHRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoICkgPT4ge1xuICAgICAgICAgIG9wZW5lZEl0ZW0oaXRlbSk7XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgdGl0bGUuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7IFxuICAgICAgICAgIGlmIChldmVudC5jb2RlPT09J0VudGVyJ3x8ZXZlbnQuY29kZT09PSdTcGFjZScpeyBcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IFxuICAgICAgICAgICAgb3BlbmVkSXRlbShpdGVtKTtcbiAgICAgICAgICB9IFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICBcbiAgICAgIGNvbnN0IHRvZ2dsZV9pdGVtID0gKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgYm9keSA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi5hY2NvcmRpb25fX2JvZHlcIik7XG4gIFxuICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1vcGVuXCIpKSB7XG4gICAgICAgICAgYm9keS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1vcGVuXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICBib2R5LnN0eWxlLnRyYW5zaXRpb24gPSAnbWF4LWhlaWdodCAxMHMgY3ViaWMtYmV6aWVyKDAuMjIsIDAuNjEsIDAuMzYsIDEpJztcbiAgICAgICAgICBib2R5LnN0eWxlLm1heEhlaWdodCA9ICcyMDAwcHgnO1xuICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImlzLW9wZW5cIik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY29yZGlvblwiKSkgeyBcbiAgICBjb25zdCBhY2NvcmRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hY2NvcmRpb25cIik7XG4gICAgYWNjb3JkaW9ucy5mb3JFYWNoKGFjY29yZGlvbiA9PiB7XG4gICAgICBhY2NvcmRpb25Jbml0KGFjY29yZGlvbik7XG4gICAgfSk7IFxuICB9XG5cbiBcblxuXG5cbiJdfQ==
