"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var body=document.querySelector("body"),html=document.querySelector("html"),header=document.querySelector(".header"),navBtn=document.querySelector(".close"),navBtnPopUp=document.querySelector(".close-pop-up"),popUp=document.querySelector(".wrap-pop-up");function closePopUp(){navBtnPopUp&&navBtnPopUp.addEventListener("click",(function(){popUp.classList.add("cancel")}))}window.onload=function(){pagescroll(),closePopUp(),openGuests(),countAdults(),countChild(),countInfants(),countPets(),window.innerWidth<=992&&openMobileSearch()};var btnGuests=document.querySelector(".btn-guests"),guests=document.querySelector(".guests"),closeGuests=document.querySelector(".close-guests"),adults=0,incrementAdults=document.querySelector("#increment-adults"),decrementAdults=document.querySelector("#decrement-adults"),child=0,incrementChild=document.querySelector("#increment-children"),decrementChild=document.querySelector("#decrement-children"),infants=0,incrementInfants=document.querySelector("#increment-infants"),decrementInfants=document.querySelector("#decrement-infants"),pets=0,incrementPets=document.querySelector("#increment-pets"),decrementPets=document.querySelector("#decrement-pets");function openGuests(){guests&&btnGuests&&(btnGuests.addEventListener("click",(function(){guests.classList.toggle("d-block")})),closeGuests.addEventListener("click",(function(){guests.classList.remove("d-block");var e="",t="",n="",r="";adults>0&&(e=adults+" Adult, ",adults>1&&(e=adults+" Adults, ")),child>0&&(t=child+" Child, ",child>1&&(t=child+" Children, ")),infants>0&&(n=infants+" Infant, ",infants>1&&(n=infants+" Infants, ")),pets>0&&(r=pets+" Pet",pets>1&&(r=pets+" Pets")),btnGuests.innerHTML=e+t+n+r})))}function countAdults(){incrementAdults&&decrementAdults&&(incrementAdults.addEventListener("click",(function(){adults<8&&(adults++,document.getElementById("adults-value").innerHTML=adults)})),decrementAdults.addEventListener("click",(function(){adults>0&&(adults--,document.getElementById("adults-value").innerHTML=adults)})))}function countChild(){incrementChild&&decrementChild&&(incrementChild.addEventListener("click",(function(){child<8&&(child++,document.getElementById("children-value").innerHTML=child)})),decrementChild.addEventListener("click",(function(){child>0&&(child--,document.getElementById("children-value").innerHTML=child)})))}function countInfants(){incrementInfants&&decrementInfants&&(incrementInfants.addEventListener("click",(function(){infants<8&&(infants++,document.getElementById("infants-value").innerHTML=infants)})),decrementInfants.addEventListener("click",(function(){infants>0&&(infants--,document.getElementById("infants-value").innerHTML=infants)})))}function countPets(){incrementPets&&decrementPets&&(incrementPets.addEventListener("click",(function(){pets<8&&(pets++,document.getElementById("pets-value").innerHTML=pets)})),decrementPets.addEventListener("click",(function(){pets>0&&(pets--,document.getElementById("pets-value").innerHTML=pets)})))}function openMobileSearch(){var e=document.querySelector(".btn-search"),t=document.querySelector(".search"),n=document.querySelector(".btn-close");e&&(e.addEventListener("click",(function(){t.classList.add("active")})),n.addEventListener("click",(function(){t.classList.remove("active")})))}var forms=document.getElementsByClassName("needs-validation");forms&&window.addEventListener("load",(function(){Array.prototype.filter.call(forms,(function(e){e.addEventListener("submit",(function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))}),!1),function(){var e=document.querySelector(".btn-sale"),t=document.querySelector(".btn-sold"),n=document.querySelector(".block-sale"),r=document.querySelector(".block-sold");e&&t&&(e.addEventListener("click",(function(){n.style.order="-1",r.style.order="0"})),t.addEventListener("click",(function(){r.style.order="-1",n.style.order="0"})))}();var elementsAnimate=document.querySelectorAll(".element-animation");function firterStories(){var e=Array.from(document.querySelectorAll("[data-story]")),t=Array.from(document.querySelectorAll("[data-btn]"));e&&t&&t.forEach((function(n){n.addEventListener("click",(function(){"all"===n.dataset.btn?(e.forEach((function(e){e.classList.remove("d-none","opacity-0","active")})),t.forEach((function(e){e.classList.remove("bg-accent","color-white")}))):n.classList.contains("bg-accent")?(n.classList.remove("bg-accent","color-white"),e.filter((function(e){n.dataset.btn===e.dataset.story&&(e.classList.add("d-none","opacity-0"),e.classList.remove("active"))}))):(n.classList.add("bg-accent","color-white"),e.filter((function(e){e.classList.contains("active")||e.classList.add("d-none","opacity-0"),n.dataset.btn===e.dataset.story&&(e.classList.remove("d-none","opacity-0"),e.classList.add("active"))})))}))}))}function closenav(){header.classList.remove("nav-open"),navBtn.style.marginRight="0",body.classList.remove("scroll-hidden")}function togglenav(){header.classList.toggle("nav-open"),header.classList.contains("nav-open")?(navBtn.style.marginRight=window.innerWidth-html.offsetWidth+"px",body.classList.add("scroll-hidden")):(body.classList.remove("scroll-hidden"),navBtn.style.marginRight="0")}!function(){if(elementsAnimate){var e,t=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&e.target.classList.add("element-show")}))}),{threshold:[.5]}),n=_createForOfIteratorHelper(elementsAnimate);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.observe(r)}}catch(e){n.e(e)}finally{n.f()}}}(),function(){var e=document.querySelector(".search"),t=document.querySelector(".search-bottom"),n=document.querySelector(".footer");e&&!t&&n.classList.add("mb-5r","mb-lg-0")}(),firterStories(),navBtn.addEventListener("click",togglenav);var links=header.querySelectorAll("a");function pagescroll(){var e=0;document.querySelector(".fixed")||window.addEventListener("scroll",(function(){e>40&&header.classList.add("scroll"),(e=pageYOffset)<40&&header.classList.remove("scroll")}))}function addScript(e,t){localStorage.getItem(e)&&(t=1);var n=document.createElement("script");return n.async=!0,n.src=e,setTimeout((function(){body.appendChild(n),localStorage.setItem(e,!0)}),t),n}function accordionInit(e){window.addEventListener("load",(function(){var t=e.querySelectorAll(".accordion__item"),n=function(t){var n=e.querySelector(".is-open");r(t),n&&n!==t&&r(n)};t.forEach((function(e){var t=e.querySelector(".accordion__title-text");t.addEventListener("click",(function(){n(e)})),t.addEventListener("keydown",(function(t){"Enter"!==t.code&&"Space"!==t.code||(t.preventDefault(),n(e))}))}));var r=function(e){var t=e.querySelector(".accordion__body");e.classList.contains("is-open")?(t.removeAttribute("style"),e.classList.remove("is-open")):(t.style.overflow="hidden",t.style.transition="max-height 10s cubic-bezier(0.22, 0.61, 0.36, 1)",t.style.maxHeight="2000px",e.classList.add("is-open"))}}))}if(links.forEach((function(e){e.addEventListener("click",closenav)})),window.addEventListener("load",(function(){var e=window.matchMedia("(max-width: 480px)").matches,t=1,n=document.querySelector(".swiper-delay_js");if(n){var r=parseInt(n.dataset.time);r>0&&(t=1+r/5,e&&(t=r),addScript("js/swiper-min.js",t).addEventListener("load",(function(){addScript("js/slider-init.js",0)})))}})),document.querySelector(".accordion")){var accordions=document.querySelectorAll(".accordion");accordions.forEach((function(e){accordionInit(e)}))}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibGVuZ3RoIiwiaSIsIkYiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsImUiLCJfZSIsImYiLCJUeXBlRXJyb3IiLCJlcnIiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwiY2FsbCIsInN0ZXAiLCJuZXh0IiwiX2UyIiwibWluTGVuIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZnJvbSIsInRlc3QiLCJhcnIiLCJsZW4iLCJhcnIyIiwiYm9keSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImh0bWwiLCJoZWFkZXIiLCJuYXZCdG4iLCJuYXZCdG5Qb3BVcCIsInBvcFVwIiwiY2xvc2VQb3BVcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJ3aW5kb3ciLCJvbmxvYWQiLCJwYWdlc2Nyb2xsIiwib3Blbkd1ZXN0cyIsImNvdW50QWR1bHRzIiwiY291bnRDaGlsZCIsImNvdW50SW5mYW50cyIsImNvdW50UGV0cyIsImlubmVyV2lkdGgiLCJvcGVuTW9iaWxlU2VhcmNoIiwiYnRuR3Vlc3RzIiwiZ3Vlc3RzIiwiY2xvc2VHdWVzdHMiLCJhZHVsdHMiLCJpbmNyZW1lbnRBZHVsdHMiLCJkZWNyZW1lbnRBZHVsdHMiLCJjaGlsZCIsImluY3JlbWVudENoaWxkIiwiZGVjcmVtZW50Q2hpbGQiLCJpbmZhbnRzIiwiaW5jcmVtZW50SW5mYW50cyIsImRlY3JlbWVudEluZmFudHMiLCJwZXRzIiwiaW5jcmVtZW50UGV0cyIsImRlY3JlbWVudFBldHMiLCJ0b2dnbGUiLCJyZW1vdmUiLCJpbnB1dEFkdWx0cyIsImlucHV0Q2hpbGQiLCJpbnB1dEluZmFudHMiLCJpbnB1dFBldHMiLCJpbm5lckhUTUwiLCJnZXRFbGVtZW50QnlJZCIsImJ0blNlYXJjaCIsInNlYXJjaCIsImJ0bkNsb3NlU2VhcmNoIiwiZm9ybXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZmlsdGVyIiwiZm9ybSIsImV2ZW50IiwiY2hlY2tWYWxpZGl0eSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiYnRuU2FsZSIsImJ0blNvbGQiLCJibG9ja1NhbGUiLCJibG9ja1NvbGQiLCJzdHlsZSIsIm9yZGVyIiwiZWxlbWVudHNBbmltYXRlIiwicXVlcnlTZWxlY3RvckFsbCIsImZpcnRlclN0b3JpZXMiLCJhcnJTdG9yaWVzIiwiYXJyQnRuIiwiZm9yRWFjaCIsIml0ZW0iLCJkYXRhc2V0IiwiYnRuIiwicSIsImNvbnRhaW5zIiwiZWxlbSIsInN0b3J5IiwiY2xvc2VuYXYiLCJtYXJnaW5SaWdodCIsInRvZ2dsZW5hdiIsIm9mZnNldFdpZHRoIiwiX3N0ZXAiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cnkiLCJjaGFuZ2UiLCJpc0ludGVyc2VjdGluZyIsInRhcmdldCIsInRocmVzaG9sZCIsIl9pdGVyYXRvciIsImVsbSIsIm9ic2VydmUiLCJzZWFyY2hCb3R0b20iLCJmb290ZXIiLCJsaW5rcyIsInBzY3JvbGwiLCJwYWdlWU9mZnNldCIsImFkZFNjcmlwdCIsInBhdGgiLCJzdGltZW91dCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzb21lSnMiLCJjcmVhdGVFbGVtZW50IiwiYXN5bmMiLCJzcmMiLCJzZXRUaW1lb3V0IiwiYXBwZW5kQ2hpbGQiLCJzZXRJdGVtIiwiYWNjb3JkaW9uSW5pdCIsImFjY29yZGlvbiIsIml0ZW1zIiwib3BlbmVkSXRlbSIsIm9wZW5lZF9pdGVtIiwidG9nZ2xlX2l0ZW0iLCJ0aXRsZSIsImNvZGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJvdmVyZmxvdyIsInRyYW5zaXRpb24iLCJtYXhIZWlnaHQiLCJsaW5rIiwibWVkaWFRdWVyeTIiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsInN3aXBlckxvYWRpbmdEZWxheSIsInN3aXBEZWxheSIsImFkZHRpbWUiLCJwYXJzZUludCIsInRpbWUiLCJhY2NvcmRpb25zIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLFNBQVNBLDJCQUEyQkMsRUFBR0MsR0FBa0IsSUFBSUMsRUFBdUIsb0JBQVhDLFFBQTBCSCxFQUFFRyxPQUFPQyxXQUFhSixFQUFFLGNBQWUsSUFBS0UsRUFBSSxDQUFFLEdBQUlHLE1BQU1DLFFBQVFOLEtBQU9FLEVBQUtLLDRCQUE0QlAsS0FBT0MsR0FBa0JELEdBQXlCLGlCQUFiQSxFQUFFUSxPQUFxQixDQUFNTixJQUFJRixFQUFJRSxHQUFJLElBQUlPLEVBQUksRUFBT0MsRUFBSSxXQUFjLEVBQUcsTUFBTyxDQUFFQyxFQUFHRCxFQUFHRSxFQUFHLFdBQWUsT0FBSUgsR0FBS1QsRUFBRVEsT0FBZSxDQUFFSyxNQUFNLEdBQWUsQ0FBRUEsTUFBTSxFQUFPQyxNQUFPZCxFQUFFUyxLQUFRLEVBQUdNLEVBQUcsU0FBV0MsR0FBTSxNQUFNQSxDQUFJLEVBQUdDLEVBQUdQLEVBQUssQ0FBRSxNQUFNLElBQUlRLFVBQVUsd0lBQTBJLENBQUUsSUFBNkNDLEVBQXpDQyxHQUFtQixFQUFNQyxHQUFTLEVBQVksTUFBTyxDQUFFVixFQUFHLFdBQWVULEVBQUtBLEVBQUdvQixLQUFLdEIsRUFBSSxFQUFHWSxFQUFHLFdBQWUsSUFBSVcsRUFBT3JCLEVBQUdzQixPQUFzQyxPQUE5QkosRUFBbUJHLEVBQUtWLEtBQWFVLENBQU0sRUFBR1IsRUFBRyxTQUFXVSxHQUFPSixHQUFTLEVBQU1GLEVBQU1NLENBQUssRUFBR1IsRUFBRyxXQUFlLElBQVdHLEdBQW9DLE1BQWhCbEIsRUFBVyxRQUFXQSxFQUFXLFFBQXdDLENBQWpDLFFBQVUsR0FBSW1CLEVBQVEsTUFBTUYsQ0FBSyxDQUFFLEVBQUss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QkFBaUIsY0FDN0NpRSxXQUFXN0QsU0FBUSxTQUFBeUMsR0FDakJELGNBQWNDLEVBQ2YsR0FDRiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCJcbmNvbnN0IGJvZHkgPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuY29uc3QgaHRtbD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaHRtbFwiKTtcbmNvbnN0IGhlYWRlcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlclwiKTtcbmNvbnN0IG5hdkJ0bj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlXCIpO1xuY29uc3QgbmF2QnRuUG9wVXA9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1wb3AtdXBcIik7XG5jb25zdCBwb3BVcD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndyYXAtcG9wLXVwXCIpO1xuXG53aW5kb3cub25sb2FkPSBmdW5jdGlvbigpe1xuICBwYWdlc2Nyb2xsKCk7XG4gIGNsb3NlUG9wVXAoKTtcbiAgb3Blbkd1ZXN0cygpO1xuXG4gIGNvdW50QWR1bHRzKCk7XG4gIGNvdW50Q2hpbGQoKTtcbiAgY291bnRJbmZhbnRzKCk7XG4gIGNvdW50UGV0cygpO1xuICBpZiggd2luZG93LmlubmVyV2lkdGggPD0gOTkyICl7XG4gICAgICBvcGVuTW9iaWxlU2VhcmNoKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNsb3NlUG9wVXAoKXtcbiAgICBpZihuYXZCdG5Qb3BVcCkge1xuICAgICAgICBuYXZCdG5Qb3BVcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBwb3BVcC5jbGFzc0xpc3QuYWRkKCdjYW5jZWwnKTtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmNvbnN0IGJ0bkd1ZXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLWd1ZXN0c1wiKTtcbmNvbnN0IGd1ZXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3Vlc3RzXCIpO1xuY29uc3QgY2xvc2VHdWVzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLWd1ZXN0c1wiKTtcbnZhciBhZHVsdHMgPSAwO1xuY29uc3QgaW5jcmVtZW50QWR1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmNyZW1lbnQtYWR1bHRzXCIpO1xuY29uc3QgZGVjcmVtZW50QWR1bHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWNyZW1lbnQtYWR1bHRzXCIpO1xudmFyIGNoaWxkID0gMDtcbmNvbnN0IGluY3JlbWVudENoaWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmNyZW1lbnQtY2hpbGRyZW5cIik7XG5jb25zdCBkZWNyZW1lbnRDaGlsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVjcmVtZW50LWNoaWxkcmVuXCIpO1xudmFyIGluZmFudHMgPSAwO1xuY29uc3QgaW5jcmVtZW50SW5mYW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5jcmVtZW50LWluZmFudHNcIik7XG5jb25zdCBkZWNyZW1lbnRJbmZhbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWNyZW1lbnQtaW5mYW50c1wiKTtcbnZhciBwZXRzID0gMDtcbmNvbnN0IGluY3JlbWVudFBldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luY3JlbWVudC1wZXRzXCIpO1xuY29uc3QgZGVjcmVtZW50UGV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVjcmVtZW50LXBldHNcIik7XG5cbmZ1bmN0aW9uIG9wZW5HdWVzdHMoKXtcbiAgICBpZihndWVzdHMgJiYgYnRuR3Vlc3RzKSB7XG4gICAgICAgIGJ0bkd1ZXN0cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBndWVzdHMuY2xhc3NMaXN0LnRvZ2dsZSgnZC1ibG9jaycpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2xvc2VHdWVzdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZ3Vlc3RzLmNsYXNzTGlzdC5yZW1vdmUoJ2QtYmxvY2snKTtcbiAgICAgICAgICAgIHZhciBpbnB1dEFkdWx0cyA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgaW5wdXRDaGlsZCA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgaW5wdXRJbmZhbnRzID0gXCJcIjtcbiAgICAgICAgICAgIHZhciBpbnB1dFBldHMgPSBcIlwiO1xuICAgICAgICAgICAgaWYoYWR1bHRzID4gMCkge1xuICAgICAgICAgICAgICAgIGlucHV0QWR1bHRzID0gYWR1bHRzICsgXCIgQWR1bHQsIFwiO1xuICAgICAgICAgICAgICAgIGlmKGFkdWx0cyA+IDEpe1xuICAgICAgICAgICAgICAgICAgICBpbnB1dEFkdWx0cyA9IGFkdWx0cyArIFwiIEFkdWx0cywgXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoY2hpbGQgPiAwKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRDaGlsZCA9IGNoaWxkICsgXCIgQ2hpbGQsIFwiO1xuICAgICAgICAgICAgICAgIGlmKGNoaWxkID4gMSl7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0Q2hpbGQgPSBjaGlsZCArIFwiIENoaWxkcmVuLCBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihpbmZhbnRzID4gMCkge1xuICAgICAgICAgICAgICAgIGlucHV0SW5mYW50cyA9IGluZmFudHMgKyBcIiBJbmZhbnQsIFwiO1xuICAgICAgICAgICAgICAgIGlmKGluZmFudHMgPiAxKXtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRJbmZhbnRzID0gaW5mYW50cyArIFwiIEluZmFudHMsIFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHBldHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRQZXRzID0gcGV0cyArIFwiIFBldFwiO1xuICAgICAgICAgICAgICAgIGlmKHBldHMgPiAxKXtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRQZXRzID0gcGV0cyArIFwiIFBldHNcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidG5HdWVzdHMuaW5uZXJIVE1MID0gaW5wdXRBZHVsdHMgKyBpbnB1dENoaWxkICsgaW5wdXRJbmZhbnRzICsgaW5wdXRQZXRzO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvdW50QWR1bHRzKCkge1xuICAgIGlmKGluY3JlbWVudEFkdWx0cyAmJiBkZWNyZW1lbnRBZHVsdHMpe1xuICAgICAgICBpbmNyZW1lbnRBZHVsdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYoYWR1bHRzIDwgOCkge1xuICAgICAgICAgICAgICAgIGFkdWx0cysrO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWR1bHRzLXZhbHVlXCIpLmlubmVySFRNTCA9IGFkdWx0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRlY3JlbWVudEFkdWx0cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZihhZHVsdHMgPiAwKXtcbiAgICAgICAgICAgICAgICBhZHVsdHMtLTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkdWx0cy12YWx1ZVwiKS5pbm5lckhUTUwgPSBhZHVsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvdW50Q2hpbGQoKSB7XG4gICAgaWYoaW5jcmVtZW50Q2hpbGQgJiYgZGVjcmVtZW50Q2hpbGQpe1xuICAgICAgICBpbmNyZW1lbnRDaGlsZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZihjaGlsZCA8IDgpIHtcbiAgICAgICAgICAgICAgICBjaGlsZCsrO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hpbGRyZW4tdmFsdWVcIikuaW5uZXJIVE1MID0gY2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkZWNyZW1lbnRDaGlsZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZihjaGlsZCA+IDApe1xuICAgICAgICAgICAgICAgIGNoaWxkLS07XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaGlsZHJlbi12YWx1ZVwiKS5pbm5lckhUTUwgPSBjaGlsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY291bnRJbmZhbnRzKCkge1xuICAgIGlmKGluY3JlbWVudEluZmFudHMgJiYgZGVjcmVtZW50SW5mYW50cyl7XG4gICAgICAgIGluY3JlbWVudEluZmFudHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYoaW5mYW50cyA8IDgpIHtcbiAgICAgICAgICAgICAgICBpbmZhbnRzKys7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmZhbnRzLXZhbHVlXCIpLmlubmVySFRNTCA9IGluZmFudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkZWNyZW1lbnRJbmZhbnRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKGluZmFudHMgPiAwKXtcbiAgICAgICAgICAgICAgICBpbmZhbnRzLS07XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmZhbnRzLXZhbHVlXCIpLmlubmVySFRNTCA9IGluZmFudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvdW50UGV0cygpIHtcbiAgICBpZihpbmNyZW1lbnRQZXRzICYmIGRlY3JlbWVudFBldHMpe1xuICAgICAgICBpbmNyZW1lbnRQZXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKHBldHMgPCA4KSB7XG4gICAgICAgICAgICAgICAgcGV0cysrO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGV0cy12YWx1ZVwiKS5pbm5lckhUTUwgPSBwZXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGVjcmVtZW50UGV0cy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZihwZXRzID4gMCl7XG4gICAgICAgICAgICAgICAgcGV0cy0tO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGV0cy12YWx1ZVwiKS5pbm5lckhUTUwgPSBwZXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBvcGVuTW9iaWxlU2VhcmNoKCl7XG4gICAgY29uc3QgYnRuU2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tc2VhcmNoXCIpO1xuICAgIGNvbnN0IHNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoXCIpO1xuICAgIGNvbnN0IGJ0bkNsb3NlU2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tY2xvc2VcIik7XG4gICAgaWYoYnRuU2VhcmNoKXtcbiAgICAgICAgYnRuU2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc2VhcmNoLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9KVxuICAgICAgICBidG5DbG9zZVNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNlYXJjaC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbnZhciBmb3JtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25lZWRzLXZhbGlkYXRpb24nKTtcbihmdW5jdGlvbigpIHtcbiAgICBpZihmb3Jtcyl7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZm9ybXMsIGZ1bmN0aW9uKGZvcm0pIHtcbiAgICAgICAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLmNoZWNrVmFsaWRpdHkoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoJ3dhcy12YWxpZGF0ZWQnKTtcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgIH1cbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgYnRuU2FsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tc2FsZScpO1xuICAgIHZhciBidG5Tb2xkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1zb2xkJyk7XG4gICAgdmFyIGJsb2NrU2FsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ibG9jay1zYWxlJyk7XG4gICAgdmFyIGJsb2NrU29sZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ibG9jay1zb2xkJyk7XG4gICAgaWYoYnRuU2FsZSAmJiBidG5Tb2xkKXtcbiAgICAgICAgYnRuU2FsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBibG9ja1NhbGUuc3R5bGUub3JkZXIgPSBcIi0xXCI7XG4gICAgICAgICAgICBibG9ja1NvbGQuc3R5bGUub3JkZXIgPSBcIjBcIjtcbiAgICAgICAgfSk7XG4gICAgICAgIGJ0blNvbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgYmxvY2tTb2xkLnN0eWxlLm9yZGVyID0gXCItMVwiO1xuICAgICAgICAgICAgYmxvY2tTYWxlLnN0eWxlLm9yZGVyID0gXCIwXCI7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG5cblxubGV0IGVsZW1lbnRzQW5pbWF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbGVtZW50LWFuaW1hdGlvbicpO1xuKGZ1bmN0aW9uKCl7XG4gICAgaWYoZWxlbWVudHNBbmltYXRlKXtcbiAgICAgICAgZnVuY3Rpb24gb25FbnRyeShlbnRyeSkge1xuICAgICAgICAgICAgZW50cnkuZm9yRWFjaChjaGFuZ2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdlbGVtZW50LXNob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHRocmVzaG9sZDogWzAuNV0gfTtcbiAgICAgICAgbGV0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKG9uRW50cnksIG9wdGlvbnMpO1xuXG4gICAgICAgIGZvciAobGV0IGVsbSBvZiBlbGVtZW50c0FuaW1hdGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZWxtKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cblxuKGZ1bmN0aW9uKCl7XG4gICAgY29uc3Qgc2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaCcpO1xuICAgIGNvbnN0IHNlYXJjaEJvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYm90dG9tJyk7XG4gICAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3RlcicpO1xuICAgIGlmKHNlYXJjaCAmJiAhc2VhcmNoQm90dG9tKXtcbiAgICAgICAgZm9vdGVyLmNsYXNzTGlzdC5hZGQoJ21iLTVyJywgJ21iLWxnLTAnICk7XG4gICAgfVxufSkoKTtcblxuZnVuY3Rpb24gZmlydGVyU3Rvcmllcygpe1xuICAgIGNvbnN0IGFyclN0b3JpZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXN0b3J5XScpKTtcbiAgICBjb25zdCBhcnJCdG4gPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJ0bl0nKSk7XG4gICAgaWYoYXJyU3RvcmllcyAmJiBhcnJCdG4pe1xuICAgICAgICBhcnJCdG4uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGF0YXNldC5idG4gPT09IFwiYWxsXCIpe1xuICAgICAgICAgICAgICAgICAgICBhcnJTdG9yaWVzLmZvckVhY2goZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScsICdvcGFjaXR5LTAnLCAnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGFyckJ0bi5mb3JFYWNoKHEgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBxLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWFjY2VudCcsICdjb2xvci13aGl0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1lbHNlXG4gICAgICAgICAgICAgICAgaWYoIWl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdiZy1hY2NlbnQnKSl7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnYmctYWNjZW50JywgJ2NvbG9yLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGFyclN0b3JpZXMuZmlsdGVyKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnLCAnb3BhY2l0eS0wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRhdGFzZXQuYnRuID09PSBlbGVtLmRhdGFzZXQuc3Rvcnkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJywgJ29wYWNpdHktMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYmctYWNjZW50JywgJ2NvbG9yLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGFyclN0b3JpZXMuZmlsdGVyKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5kYXRhc2V0LmJ0biA9PT0gZWxlbS5kYXRhc2V0LnN0b3J5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScsICdvcGFjaXR5LTAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxufVxuZmlydGVyU3RvcmllcygpO1xuXG5cblxuXG5cbiBcbiAgICAgIGZ1bmN0aW9uIGNsb3NlbmF2KCkge1xuICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcIm5hdi1vcGVuXCIpO1xuICBuYXZCdG4uc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcbiAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdzY3JvbGwtaGlkZGVuJyk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZW5hdigpIHtcbiAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoXCJuYXYtb3BlblwiKTtcbiAgaWYgKGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXYtb3BlblwiKSkge1xuICAgIG5hdkJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gaHRtbC5vZmZzZXRXaWR0aCArIFwicHhcIjtcbiAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ3Njcm9sbC1oaWRkZW4nKTtcbiAgfSBlbHNlIHtcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3Njcm9sbC1oaWRkZW4nKTtcbiAgICBuYXZCdG4uc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcbiAgfVxufVxubmF2QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVuYXYpO1xuY29uc3QgbGlua3MgPSBoZWFkZXIucXVlcnlTZWxlY3RvckFsbCgnYScpO1xubGlua3MuZm9yRWFjaChsaW5rID0+IHtcbiAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlbmF2KTtcbn0pOyBcbiAgICAgICBmdW5jdGlvbiBwYWdlc2Nyb2xsKCl7XG4gICAgbGV0IHBzY3JvbGwgPSAwO1xuICAgIGNvbnN0IGZpeGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5maXhlZFwiKTtcbiAgICBpZighZml4ZWQpe1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAocHNjcm9sbCA+IDQwKXtcbiAgICAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCgnc2Nyb2xsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwc2Nyb2xsPXBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgaWYocHNjcm9sbCA8IDQwKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Njcm9sbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4gIFxuICAgICAgZnVuY3Rpb24gYWRkU2NyaXB0KHBhdGggLHN0aW1lb3V0KXsgIFxuICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHBhdGgpKSB7XG4gICAgICBzdGltZW91dD0xOyBcbiAgICB9ICBcbiAgICBjb25zdCBzb21lSnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgXG4gICAgc29tZUpzLmFzeW5jPXRydWU7XG4gICAgc29tZUpzLnNyYz1wYXRoOyAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBib2R5LmFwcGVuZENoaWxkKHNvbWVKcyk7ICAgXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0ocGF0aCAsIHRydWUpO1xuICB9LCBzdGltZW91dCk7ICAgICBcbiAgICAgIHJldHVybiAoIFxuICAgICAgICAgIHNvbWVKcyBcbiAgICAgICkgXG59ICAgXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKXsgICBcbmNvbnN0IG1lZGlhUXVlcnkyID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQ4MHB4KScpLm1hdGNoZXM7ICBcbmxldCBzd2lwZXJMb2FkaW5nRGVsYXk9MTsgXG5jb25zdCBzd2lwRGVsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWRlbGF5X2pzJyk7IFxuaWYoc3dpcERlbGF5KXsgXG4gIGNvbnN0IGFkZHRpbWU9IHBhcnNlSW50KHN3aXBEZWxheS5kYXRhc2V0LnRpbWUpO1xuICBpZihhZGR0aW1lPjApe1xuICAgIHN3aXBlckxvYWRpbmdEZWxheT0xKyBhZGR0aW1lLzU7XG4gICAgaWYgKG1lZGlhUXVlcnkyKSB7XG4gICAgICBzd2lwZXJMb2FkaW5nRGVsYXkgPWFkZHRpbWU7XG4gICAgfSBcbiAgICAgIGFkZFNjcmlwdCgnanMvc3dpcGVyLW1pbi5qcycgLCBzd2lwZXJMb2FkaW5nRGVsYXkpLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCgpPT57XG4gICAgICAgIGFkZFNjcmlwdCgnanMvc2xpZGVyLWluaXQuanMnICwgMCk7XG4gICAgICB9KSBcbiAgICAgIC8vc3dpcGVyIGxvYWRpbmcgb25seSBpZiBzd2lwZXIgZGVsYXkgZGF0YXRpbWUgPiAwXG4gIH0gIFxufSAgIFxufSlcbiAgICAgIFxuZnVuY3Rpb24gYWNjb3JkaW9uSW5pdChhY2NvcmRpb24pIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgXG4gICAgICBjb25zdCBpdGVtcyA9IGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yQWxsKFwiLmFjY29yZGlvbl9faXRlbVwiKTsgXG4gICAgICBjb25zdCBvcGVuZWRJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3Qgb3BlbmVkX2l0ZW0gPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihcIi5pcy1vcGVuXCIpOyBcbiAgICAgICAgdG9nZ2xlX2l0ZW0oaXRlbSk7IFxuICAgICAgICBpZiAob3BlbmVkX2l0ZW0gJiYgb3BlbmVkX2l0ZW0gIT09IGl0ZW0pIHtcbiAgICAgICAgICB0b2dnbGVfaXRlbShvcGVuZWRfaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gIFxuICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCB0aXRsZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcihcIi5hY2NvcmRpb25fX3RpdGxlLXRleHRcIik7IFxuICAgICAgICB0aXRsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCApID0+IHtcbiAgICAgICAgICBvcGVuZWRJdGVtKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgXG4gICAgICAgIHRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4geyBcbiAgICAgICAgICBpZiAoZXZlbnQuY29kZT09PSdFbnRlcid8fGV2ZW50LmNvZGU9PT0nU3BhY2UnKXsgXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICAgIG9wZW5lZEl0ZW0oaXRlbSk7XG4gICAgICAgICAgfSBcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgXG4gICAgICBjb25zdCB0b2dnbGVfaXRlbSA9IChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuYWNjb3JkaW9uX19ib2R5XCIpO1xuICBcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtb3BlblwiKSkge1xuICAgICAgICAgIGJvZHkucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtb3BlblwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgICAgYm9keS5zdHlsZS50cmFuc2l0aW9uID0gJ21heC1oZWlnaHQgMTBzIGN1YmljLWJlemllcigwLjIyLCAwLjYxLCAwLjM2LCAxKSc7XG4gICAgICAgICAgYm9keS5zdHlsZS5tYXhIZWlnaHQgPSAnMjAwMHB4JztcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJpcy1vcGVuXCIpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIFxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2NvcmRpb25cIikpIHsgXG4gICAgY29uc3QgYWNjb3JkaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWNjb3JkaW9uXCIpO1xuICAgIGFjY29yZGlvbnMuZm9yRWFjaChhY2NvcmRpb24gPT4ge1xuICAgICAgYWNjb3JkaW9uSW5pdChhY2NvcmRpb24pO1xuICAgIH0pOyBcbiAgfVxuXG4gXG5cblxuXG4iXX0=
